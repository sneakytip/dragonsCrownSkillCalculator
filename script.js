class SkillType{constructor(b,a,c){this.name=b;this.label=a;this.categoryGroup=c}}class SkillCategory{constructor(b,a,c){this.name=b;this.label=a;this.skillGroup=c}}class Skill{constructor(b,a,c,d,e){this.name=b;this.label=a;this.description=c;this.tierGroup=d;this.moreInfo=e;this.levelMax=d.length}}class SkillTier{constructor(b,a,c,d,e,h){this.level=b;this.effect=a;this.cost=c;this.minLevelPlayer=d;this.minLevelCategory=e;this.moreInfo=h}}
const skillsCommon=new SkillType("common","Common Skills",[new SkillCategory("common","Common",[new Skill("slide","Slide Attack","Increased chance of taking enemy down when sliding ("+String.fromCharCode(8615)+" + "+String.fromCharCode(9632)+").",[new SkillTier(1,"Power: 30"+String.fromCharCode(8193)+"Knockdown +30%",1,-1,-1,["Slight increase to max movement distance."]),new SkillTier(2,"Power: 34"+String.fromCharCode(8193)+"Knockdown +40%",1,10,-1,["Slight increase to max movement distance."]),new SkillTier(3,
"Power: 40"+String.fromCharCode(8193)+"Knockdown +55%",2,20,3,["Moderate increase to max movement distance."]),new SkillTier(4,"Power: 46"+String.fromCharCode(8193)+"Knockdown +70%",3,31,3,["Great increase to max movement distance."]),new SkillTier(5,"Power: 60"+String.fromCharCode(8193)+"Knockdown +100%",4,40,6,["Massive increase to max movement distance."])],["The max distance of the slide attack increases as the level of the skill increases.","The max time of execution does not change with changes to the skill level, thus you will cover further max distances in the same amount of time you would cover the default max distance."]),
new Skill("wealthHealth","Wealth to Health","Picking up coins recovers HP.",[new SkillTier(1,"HP recovered per coin: 2",1,-1,-1,[""]),new SkillTier(2,"HP recovered per coin: 3",1,5,-1,[""]),new SkillTier(3,"HP recovered per coin: 5",2,14,3,[""]),new SkillTier(4,"HP recovered per coin: 7",3,27,3,[""]),new SkillTier(5,"HP recovered per coin: 10",4,42,6,[""])],[""]),new Skill("moneyPower","Money is Power","Picking up coins adds to your score.",[new SkillTier(1,"Score obtained +10",1,-1,-1,[""]),new SkillTier(2,
"Score obtained +20",1,8,-1,[""]),new SkillTier(3,"Score obtained +40",2,17,3,[""]),new SkillTier(4,"Score obtained +60",3,29,3,[""]),new SkillTier(5,"Score obtained +100",4,43,6,[""])],[""]),new Skill("vitalityBoost","Vitality Boost","Increases your max HP.",[new SkillTier(1,"Max HP +20",1,-1,-1,[""]),new SkillTier(2,"Max HP +35",1,7,-1,[""]),new SkillTier(3,"Max HP +50",1,13,3,[""]),new SkillTier(4,"Max HP +65",2,19,3,[""]),new SkillTier(5,"Max HP +80",2,25,6,[""]),new SkillTier(6,"Max HP +100",
3,31,6,[""]),new SkillTier(7,"Max HP 120",3,38,9,[""]),new SkillTier(8,"Max HP +145",4,45,9,[""]),new SkillTier(9,"Max HP +170",4,52,12,[""]),new SkillTier(10,"Max HP +200",6,59,12,[""])],[""]),new Skill("nutritionist","Nutritionist","Increases the healing effectiveness of food.",[new SkillTier(1,"Recovery Amount +20%",1,-1,-1,[""]),new SkillTier(2,"Recovery Amount +25%",1,11,-1,[""]),new SkillTier(3,"Recovery Amount +30%",2,24,3,[""]),new SkillTier(4,"Recovery Amount +35%",3,37,3,[""]),new SkillTier(5,
"Recovery Amount +50%",4,51,6,[""])],[""]),new Skill("maintenance","Maintenance","Grants a chance that using a temporary weapon won't decrease the number of uses.",[new SkillTier(1,"Chance that # of uses won't deplete: 20%",1,6,0,[""]),new SkillTier(2,"Chance that # of uses won't deplete: 25%",1,13,0,[""]),new SkillTier(3,"Chance that # of uses won't deplete: 30%",2,23,3,[""]),new SkillTier(4,"Chance that # of uses won't deplete: 35%",3,34,3,[""]),new SkillTier(5,"Chance that # of uses won't deplete: 50%",
4,47,6,[""])],[""]),new Skill("adroitHands","Adroit Hands","Reduces cooldown time in between using items.",[new SkillTier(1,"Item use cooldown -10%",1,9,0,[""]),new SkillTier(2,"Item use cooldown -15%",1,16,0,[""]),new SkillTier(3,"Item use cooldown -20%",2,22,3,[""]),new SkillTier(4,"Item use cooldown -25%",2,29,3,[""]),new SkillTier(5,"Item use cooldown -30%",3,36,6,[""]),new SkillTier(6,"Item use cooldown -35%",3,44,6,[""]),new SkillTier(7,"Item use cooldown -50%",5,53,9,[""])],[""]),new Skill("evasion",
"Evasion","Increases the number of times you can evade ( R1 ) in a row.",[new SkillTier(1,"Number of evasions +1",2,12,0,[""]),new SkillTier(2,"Number of evasions +2",3,32,3,[""]),new SkillTier(3,"Number of evasions +3",4,52,6,[""])],[""]),new Skill("deepPockets","Deep Pockets","Increases the number of item slots in Bags.",[new SkillTier(1,"Number of Bag slots: 8",2,15,0,[""]),new SkillTier(2,"Number of Bag slots: 9",4,30,3,[""]),new SkillTier(3,"Number of Bag slots: 10",6,50,6,[""])],[""])])]),skillsFighter=
new SkillType("fighter","Fighter Skills",[new SkillCategory("attack","Attack",[new Skill("cycloneMasher","Cyclone Masher","Increases duration of aerial attacks. Rapidly press "+String.fromCharCode(9632)+" to activate.",[new SkillTier(1,"Power: 20"+String.fromCharCode(8193)+"Descent speed -30%",1,-1,-1,[""]),new SkillTier(2,"Power: 22"+String.fromCharCode(8193)+"Descent speed -45"+String.fromCharCode(8193)+"Attack range: 105%",1,10,-1,[""]),new SkillTier(3,"Power: 23"+String.fromCharCode(8193)+"Descent speed -60"+
String.fromCharCode(8193)+"Attack range: 110%",2,19,3,[""]),new SkillTier(4,"Power: 25"+String.fromCharCode(8193)+"Descent speed -75"+String.fromCharCode(8193)+"Attack range: 115%",3,30,3,[""]),new SkillTier(5,"Power: 30"+String.fromCharCode(8193)+"Descent speed -95"+String.fromCharCode(8193)+"Attack range: 125%",5,45,6,[""])],[""]),new Skill("shockwave","Shockwave","Send out ripples that creep along the ground. Activate with "+String.fromCharCode(8613)+" + "+String.fromCharCode(9632)+".",[new SkillTier(1,
"Power: 15"+String.fromCharCode(8193)+"Number of shockwaves: 2",1,-1,-1,[""]),new SkillTier(2,"Power: 18"+String.fromCharCode(8193)+"Number of shockwaves: 2",1,8,-1,[""]),new SkillTier(3,"Power: 23"+String.fromCharCode(8193)+"Number of shockwaves: 3",2,16,3,[""]),new SkillTier(4,"Power: 30"+String.fromCharCode(8193)+"Number of shockwaves: 3",3,26,3,[""]),new SkillTier(5,"Power: 45"+String.fromCharCode(8193)+"Number of shockwaves: 4",5,40,6,["Vertical reach of shockwaves greatly increased."])],[""])]),
new SkillCategory("defense","Defense",[new Skill("coverAll","Cover Allies","Hold "+String.fromCharCode(9632)+" on the ground to use your shield to protect allies and temporarily increase your attack power upon successful block.",[new SkillTier(1,"Max ATK Damage Increase: +40%",1,-1,-1,[""]),new SkillTier(2,"Effect range: 125%"+String.fromCharCode(8193)+"Max ATK Damage Increase: +70%",2,17,-1,[""]),new SkillTier(3,"Effect range: 200%"+String.fromCharCode(8193)+"Max ATK Damage Increase: +100%",3,36,
3,[""])],[""]),new Skill("reflexGuard","Reflex Guard","Grants chance to automatically guard when attacked",[new SkillTier(1,"Chance of auto-defense: 25%",1,-1,-1,[""]),new SkillTier(2,"Chance of auto-defense: 30%",1,7,-1,[""]),new SkillTier(3,"Chance of auto-defense: 35%",2,16,3,[""]),new SkillTier(4,"Chance of auto-defense: 40%",2,27,3,[""]),new SkillTier(5,"Chance of auto-defense: 50%",3,35,6,[""])],[""])])]),skillsList=[skillsCommon,skillsFighter];
function getSkillType(b){let a={};skillsList.forEach(c=>{c.name===b&&(a=c)});return a}function getSkillTier(b,a,c,d){let e={};skillsList.forEach(h=>{h.name===b&&h.categoryGroup.forEach(k=>{k.name===a&&k.skillGroup.forEach(g=>{g.name===c&&g.tierGroup.forEach(n=>{n.level===d&&(e=n)})})})});return e};const characterClassNames="Fighter Amazon Dwarf Elf Sorceress Wizard".split(" "),maxSkillPoints=5,skillRowDataId="data-row-id",skillDataCellId="data-cell-id",skillDataElementId="data-elem-id",skillIdSuffx="-name-desc",skillEffectIdSuffx="-effects",skillConditionsIdSuffx="-conditions",skillElemIdSuffixCost="-cost",skillElemIdSuffixPlayer="-player",skillElemIdSuffixCategory="-category",skillEffectsCurrentIdSuffix="-current",skillEffectsNextIdSuffix="-next",skillDataIdType="data-skill-type",skillDataIdCategory=
"data-skill-category",skillDataIdCategoryLabel="data-skill-category-label",skillDataIdSkill="data-skill-name",skillDataIdTierLevel="data-skill-tier",skillDataIdCategoryLevel="data-skill-category-level";let playerSelectionPrevious="",currentSkillPoints=maxSkillPoints,classSkillTiers=[],commonSkillTiers=[];
function processSkillTierPropertiesForOutput(b,a,c=null){switch(b){case "effect":return"Next: "+a;case "cost":return 0<a?"Skill point cost: "+a+" point(s)":"";case "player":return 0<a?"Player LV must be at least LV "+a+".":"";case "category":return 0<a&&c?"The "+c+" category skill must be LV "+a+".":"";default:return""}}function resetTableBody(b){}
function updateTotalCurrentSkillPoints(b,a,c){let d=document.getElementById("current-total-points");0<c?d.setAttribute("value",Number(d.getAttribute("value"))-b):d.setAttribute("value",Number(d.getAttribute("value"))+a)}function resetTotalCurrentSkillPoints(b=0){document.getElementById("current-total-points").setAttribute("value",maxSkillPoints-b)}function populateSkillEffects(b,a,c,d){b.innerText=c;a.innerText=d}
function populateSkillConditions(b,a,c){let d=["cost","player","category"];for(let e=0;e<b.length;e++)b[e].innerText="category"===d[e]?processSkillTierPropertiesForOutput(d[e],a[e],c):processSkillTierPropertiesForOutput(d[e],a[e])}function updateCategoryLevel(b,a){a=Number(b.getAttribute("value"))+a;b.setAttribute("value",a)}function rollbackInputValue(b,a){b.value=a;b.setAttribute("value",a)}
function getFewerChildrenFromParentChildren(b,a,c,d,e){let h=Array(3),k=[];for(const g of b.children)g.getAttribute(a)===c?h[0]=g:g.getAttribute(a)===d?h[1]=g:g.getAttribute(a)===e&&(h[2]=g);h.forEach(g=>{k.push(g)});return k}
function updateSkillLevel(b){var a=b.getAttribute(skillDataIdSkill),c=b.getAttribute(skillDataIdType),d=b.getAttribute(skillDataIdCategory);let e=Number(b.getAttribute("max")),h=document.getElementById(a),k=document.getElementById(d).getElementsByTagName("input")[0],g=Number(document.getElementById("current-total-points").getAttribute("value")),n=Number(b.getAttribute("value")),q=Number(b.value),t=q+1,l=q-n,r={},m={};0<q?r=getSkillTier(c,d,a,q):r.effect="";t>e?(m.cost="",m.minLevelPlayer="",m.minLevelCategory=
"",m.effect="--"):m=getSkillTier(c,d,a,t);0<l&&g>=Number(r.cost)||0>l?0<l&&Number(k.getAttribute("value"))>=Number(r.minLevelCategory)?(d=getFewerChildrenFromParentChildren(h,skillDataCellId,a+skillEffectIdSuffx,a+skillConditionsIdSuffx),c=getFewerChildrenFromParentChildren(d[0],skillDataElementId,a+skillEffectsCurrentIdSuffix,a+skillEffectsNextIdSuffix),a=getFewerChildrenFromParentChildren(d[1],skillDataElementId,a+skillElemIdSuffixCost,a+skillElemIdSuffixPlayer,a+skillElemIdSuffixCategory),d=[m.cost,
m.minLevelPlayer,m.minLevelCategory],b.setAttribute("value",q),populateSkillConditions(a,d,b.getAttribute(skillDataIdCategoryLabel)),populateSkillEffects(c[0],c[1],r.effect,m.effect),updateCategoryLevel(k,l),updateTotalCurrentSkillPoints(Number(r.cost),Number(m.cost),l)):(console.log("Category level too low."),rollbackInputValue(b,n)):(console.log("Likely not enough skill points, double-check."),rollbackInputValue(b,n))}
function elementBuilderInnerElements(b,a){a.forEach(c=>{b.appendChild(c)});return b}
function populateSkillTable(b,a,c){let d=document.getElementById(a),e=document.createElement("tbody");c=document.getElementById(c);let h=document.createTextNode(b.label);c.appendChild(h);b.categoryGroup.forEach(k=>{let g=0,n=document.createElement("td"),q=document.createElement("p"),t=document.createElement("label"),l=document.createElement("input"),r=document.createTextNode(k.label+" Skill"),m=document.createTextNode("Current LV: "),H=document.createTextNode(0);k.skillGroup.forEach(f=>{document.createTextNode(f.label.toString());
document.createTextNode(f.description.toString());let u=document.createElement("tr"),v=document.createElement("td"),w=document.createElement("td"),x=document.createElement("td"),y=document.createElement("td"),z=document.createElement("p"),A=document.createElement("p"),B=document.createElement("p"),C=document.createElement("p"),D=document.createElement("p"),E=document.createElement("p"),F=document.createElement("p"),G=document.createElement("p"),I=document.createTextNode(f.label),J=document.createTextNode(f.description),
K=document.createTextNode(""),L=document.createTextNode("Next"),M=document.createTextNode(f.tierGroup[0].effect),N=document.createTextNode(processSkillTierPropertiesForOutput("cost",f.tierGroup[0].cost)),O=document.createTextNode(processSkillTierPropertiesForOutput("player",f.tierGroup[0].minLevelPlayer)),P=document.createTextNode(processSkillTierPropertiesForOutput("category",f.tierGroup[0].minLevelCategory,k.label)),p=document.createElement("input");y.setAttribute(skillDataCellId,f.name+skillConditionsIdSuffx);
C.setAttribute(skillDataElementId,f.name+skillElemIdSuffixCost);D.setAttribute(skillDataElementId,f.name+skillElemIdSuffixPlayer);E.setAttribute(skillDataElementId,f.name+skillElemIdSuffixCategory);C.appendChild(N);D.appendChild(O);E.appendChild(P);elementBuilderInnerElements(y,[C,D,E]);p.setAttribute("type","number");p.setAttribute("onKeyDown","return false");p.setAttribute("min","0");p.setAttribute("value","0");p.setAttribute("max",f.tierGroup.length.toString());p.setAttribute(skillDataIdType,b.name);
p.setAttribute(skillDataIdCategory,k.name);p.setAttribute(skillDataIdCategoryLabel,k.label);p.setAttribute(skillDataIdSkill,f.name);x.appendChild(p);x.addEventListener("input",function(Q){updateSkillLevel(Q.target)});w.setAttribute(skillDataCellId,f.name+skillEffectIdSuffx);A.setAttribute("class","skills-text-element-next-header");z.setAttribute(skillDataElementId,f.name+skillEffectsCurrentIdSuffix);B.setAttribute(skillDataElementId,f.name+skillEffectsNextIdSuffix);A.appendChild(L);B.appendChild(M);
z.appendChild(K);elementBuilderInnerElements(w,[z,A,B]);v.setAttribute(skillDataCellId,f.name+skillIdSuffx);F.appendChild(I);G.appendChild(J);elementBuilderInnerElements(v,[F,G]);u.setAttribute("id",f.name);1>g&&(n.setAttribute("id",k.name),l.setAttribute("type","number"),l.setAttribute("value","0"),l.setAttribute("min","0"),l.setAttribute("readonly",""),l.setAttribute("class","table-input-non-interactable"),l.appendChild(H),elementBuilderInnerElements(t,[m,l]),q.appendChild(r),elementBuilderInnerElements(n,
[q,t,l]),u.appendChild(n));elementBuilderInnerElements(u,[v,w,x,y]);g++;e.appendChild(u)});n.setAttribute("rowspan",g)});e.setAttribute("id",a);d.parentNode.replaceChild(e,d)}
function updateSkillsData(){const b=document.getElementById("tables-container");let a=document.getElementById("characters-list").value;if(a!==playerSelectionPrevious){let c=document.getElementById("common-skills-table"),d=document.getElementById("class-skills-table"),e=getSkillType(a);if(c.getAttribute("data-table-populated"))resetTableBody("common-skills-table-body");else{let h=getSkillType("common");populateSkillTable(h,"common-skills-table-body","common-skills-table-label");c.setAttribute("data-table-populated",
"");console.log(h)}playerSelectionPrevious=a;currentSkillPoints=maxSkillPoints;populateSkillTable(e,"class-skills-table-body","class-skills-table-label");d.setAttribute("data-table-populated","");"block"!==b.style.display&&(b.style.display="block");resetTotalCurrentSkillPoints();console.info(e)}}
function prepCollapse(){let b=document.getElementsByClassName("collapsible");for(let a=0;a<b.length;a++)b[a].addEventListener("click",function(){this.classList.toggle("active");var c=this.nextElementSibling;c.style.maxHeight=c.style.maxHeight?null:c.scrollHeight+"px"})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",prepCollapse):prepCollapse();
